# Export Context - Ubiquitous Language

> ðŸ“‹ **ë¬¸ì„œ ëª©ì **: Export Contextì˜ ê³µí†µ ì–¸ì–´ ì‚¬ì „

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-10-26

---

## í•µì‹¬ ìš©ì–´

### Diagram Image (ë‹¤ì´ì–´ê·¸ëž¨ ì´ë¯¸ì§€)
ë Œë”ë§ëœ SVGë¥¼ PNG, SVG ë“±ì˜ ì´ë¯¸ì§€ íŒŒì¼ë¡œ ë³€í™˜í•œ ê²°ê³¼ë¬¼.

**ì˜ì—­**: Aggregate Root

**í¬ë§·**: PNG, SVG

---

### Source SVG (ì†ŒìŠ¤ SVG)
Rendering Contextì—ì„œ ë Œë”ë§ëœ ì›ë³¸ SVG. ì´ë¯¸ì§€ ë³€í™˜ì˜ ìž…ë ¥ ë°ì´í„°ìž…ë‹ˆë‹¤.

**ì˜ì—­**: DiagramImageì˜ ì†ì„±

**í˜•ì‹**: string (SVG XML)

---

### Image Format (ì´ë¯¸ì§€ í¬ë§·)
exportí•  ì´ë¯¸ì§€ì˜ íŒŒì¼ í˜•ì‹.

**ì˜ì—­**: Enum

**ê°’**:
- `png`: ëž˜ìŠ¤í„° ì´ë¯¸ì§€ (í”½ì…€ ê¸°ë°˜)
- `svg`: ë²¡í„° ì´ë¯¸ì§€ (í™•ëŒ€/ì¶•ì†Œ ë¬´ì†ì‹¤)

---

### Image Data (ì´ë¯¸ì§€ ë°ì´í„°)
ë³€í™˜ëœ ì´ë¯¸ì§€ì˜ ì‹¤ì œ ë°”ì´ë„ˆë¦¬ ë˜ëŠ” í…ìŠ¤íŠ¸ ë°ì´í„°.

**ì˜ì—­**: DiagramImageì˜ ì†ì„±

**í˜•ì‹**:
- PNG: Buffer (ë°”ì´ë„ˆë¦¬)
- SVG: string (í…ìŠ¤íŠ¸)

---

### Export Options (ë‚´ë³´ë‚´ê¸° ì˜µì…˜)
ì´ë¯¸ì§€ export ì‹œ ì ìš©í•  ì„¤ì •ê°’.

**ì˜ì—­**: Value Object

**í¬í•¨ ì •ë³´**:
- fileName: íŒŒì¼ëª… (í™•ìž¥ìž ì œì™¸)
- width: ì´ë¯¸ì§€ ë„ˆë¹„ (px)
- height: ì´ë¯¸ì§€ ë†’ì´ (px)
- scale: ë°°ìœ¨ (PNGë§Œ ì ìš©)

---

### Export Status (ë‚´ë³´ë‚´ê¸° ìƒíƒœ)
ì´ë¯¸ì§€ export ìž‘ì—…ì˜ í˜„ìž¬ ìƒíƒœ.

**ì˜ì—­**: Enum

**ê°’**:
- `pending`: export ëŒ€ê¸° ì¤‘
- `success`: export ì„±ê³µ
- `failed`: export ì‹¤íŒ¨

---

### Export Error (ë‚´ë³´ë‚´ê¸° ì—ëŸ¬)
ì´ë¯¸ì§€ ë³€í™˜ ì¤‘ ë°œìƒí•œ ì˜¤ë¥˜ ì •ë³´.

**ì˜ì—­**: Value Object

**í¬í•¨ ì •ë³´**: ì—ëŸ¬ ë©”ì‹œì§€

---

### File Name (íŒŒì¼ëª…)
ë‹¤ìš´ë¡œë“œí•˜ê±°ë‚˜ ì €ìž¥í•  íŒŒì¼ì˜ ì´ë¦„.

**ì˜ì—­**: ExportOptionsì˜ ì†ì„±

**ê·œì¹™**: íŠ¹ìˆ˜ë¬¸ìž ì œí•œ (`/`, `\`, `:` ë¶ˆê°€)

**ê¸°ë³¸ê°’**: `diagram-{timestamp}.{format}`

---

### File Size (íŒŒì¼ í¬ê¸°)
ìƒì„±ëœ ì´ë¯¸ì§€ íŒŒì¼ì˜ ë°”ì´íŠ¸ í¬ê¸°.

**ì˜ì—­**: DiagramImageì˜ ì†ì„±

**ë‹¨ìœ„**: bytes

---

### Width / Height (ë„ˆë¹„ / ë†’ì´)
ì´ë¯¸ì§€ì˜ ê°€ë¡œ/ì„¸ë¡œ í¬ê¸°.

**ì˜ì—­**: ExportOptionsì˜ ì†ì„±

**ë‹¨ìœ„**: pixels

**ê¸°ë³¸ê°’**: null (ì›ë³¸ í¬ê¸° ì‚¬ìš©)

**ì œì•½**: ì–‘ìˆ˜ì—¬ì•¼ í•¨

---

### Scale (ë°°ìœ¨)
PNG ì´ë¯¸ì§€ ìƒì„± ì‹œ ì ìš©í•  í™•ëŒ€/ì¶•ì†Œ ë¹„ìœ¨.

**ì˜ì—­**: ExportOptionsì˜ ì†ì„±

**ê¸°ë³¸ê°’**: 1 (ì›ë³¸ í¬ê¸°)

**ì œì•½**: 0ë³´ë‹¤ ì»¤ì•¼ í•¨

**ì ìš© ëŒ€ìƒ**: PNGë§Œ (SVGëŠ” ë¬´ì‹œ)

---

## í–‰ìœ„ ìš©ì–´

### Create Diagram Image (ë‹¤ì´ì–´ê·¸ëž¨ ì´ë¯¸ì§€ ìƒì„±)
ë Œë”ë§ëœ SVGë¡œë¶€í„° ìƒˆë¡œìš´ DiagramImageë¥¼ ìƒì„±í•˜ëŠ” í–‰ìœ„.

**ìž…ë ¥**: Source SVG, Image Format, Export Options

**ì¶œë ¥**: DiagramImage (Aggregate)

---

### Export (ë‚´ë³´ë‚´ë‹¤)
SVGë¥¼ ì§€ì •ëœ í¬ë§·ì˜ ì´ë¯¸ì§€ë¡œ ë³€í™˜í•˜ëŠ” í–‰ìœ„.

**PNG**: Canvas API ë˜ëŠ” puppeteer ì‚¬ìš©

**SVG**: ì›ë³¸ SVG ê·¸ëŒ€ë¡œ ë°˜í™˜

**ì„±ê³µ ì‹œ**: `ImageExported` ì´ë²¤íŠ¸ ë°œí–‰

**ì‹¤íŒ¨ ì‹œ**: `ImageExportFailed` ì´ë²¤íŠ¸ ë°œí–‰

---

### Get Image Data (ì´ë¯¸ì§€ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°)
exportê°€ ì„±ê³µí•œ DiagramImageì—ì„œ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ëŠ” í–‰ìœ„.

**ì „ì œ ì¡°ê±´**: `exportStatus === SUCCESS`

**ë°˜í™˜ íƒ€ìž…**: Buffer (PNG) ë˜ëŠ” string (SVG)

---

### Get File Name (íŒŒì¼ëª… ê°€ì ¸ì˜¤ê¸°)
DiagramImageì˜ íŒŒì¼ëª…ì„ í™•ìž¥ìžì™€ í•¨ê»˜ ë°˜í™˜í•˜ëŠ” í–‰ìœ„.

**ì˜ˆì‹œ**: `my-diagram.png`, `diagram-1735200000.svg`

---

### Resize (í¬ê¸° ì¡°ì •)
PNG ì´ë¯¸ì§€ì˜ í¬ê¸°ë¥¼ ìž¬ì¡°ì •í•˜ê³  ìž¬ë³€í™˜í•˜ëŠ” í–‰ìœ„.

**ìž…ë ¥**: width, height

**ì œì•½**: PNG í¬ë§·ë§Œ ê°€ëŠ¥ (SVGëŠ” ì˜ˆì™¸ ë°œìƒ)

**ê²°ê³¼**: `ImageResized` ì´ë²¤íŠ¸ ë°œí–‰

---

## ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ìš©ì–´

### Valid Export Options (ìœ íš¨í•œ ë‚´ë³´ë‚´ê¸° ì˜µì…˜)
exportì— ì‚¬ìš©í•  ìˆ˜ ìžˆëŠ” ì˜¬ë°”ë¥¸ ì˜µì…˜ ê°’.

**ì¡°ê±´**:
- width/height/scaleì€ ì–‘ìˆ˜
- fileNameì— íŠ¹ìˆ˜ë¬¸ìž ì—†ìŒ

---

### Successful Export (ì„±ê³µì ì¸ ë‚´ë³´ë‚´ê¸°)
SVGê°€ ì—ëŸ¬ ì—†ì´ ì´ë¯¸ì§€ë¡œ ë³€í™˜ëœ ìƒíƒœ.

**ì¡°ê±´**: `exportStatus === SUCCESS` AND `imageData !== null` AND `error === null`

---

### Failed Export (ì‹¤íŒ¨í•œ ë‚´ë³´ë‚´ê¸°)
ì´ë¯¸ì§€ ë³€í™˜ ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí•œ ìƒíƒœ.

**ì¡°ê±´**: `exportStatus === FAILED` AND `error !== null` AND `imageData === null`

---

### PNG Resizable (PNG í¬ê¸° ì¡°ì • ê°€ëŠ¥)
PNG ì´ë¯¸ì§€ë§Œ í¬ê¸°ë¥¼ ì¡°ì •í•  ìˆ˜ ìžˆëŠ” ê·œì¹™.

**ì¡°ê±´**: `format === PNG`

**SVG ì‹œ**: ì˜ˆì™¸ ë°œìƒ (SVGëŠ” ë²¡í„°ì´ë¯€ë¡œ ì›ë³¸ ìœ ì§€)

---

## ìŠ¹ì¸ ìƒíƒœ

**ì „ì²´ ìŠ¹ì¸ ìƒíƒœ**: âœ… (ìŠ¹ì¸ ì™„ë£Œ)

**ìŠ¹ì¸ ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [x] í•µì‹¬ ìš©ì–´ ì •ì˜ ìŠ¹ì¸
- [x] í–‰ìœ„ ìš©ì–´ ì •ì˜ ìŠ¹ì¸
- [x] ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ìš©ì–´ ìŠ¹ì¸

**ìŠ¹ì¸ ë‚ ì§œ**: 2025-10-26

---

> ðŸ“Ž **ê´€ë ¨ ë¬¸ì„œ**:
> - `documents/domain-modeling/bounded-contexts.md`
> - `documents/domain-modeling/export/aggregates.md`
> - `documents/domain-modeling/export/events.md`
